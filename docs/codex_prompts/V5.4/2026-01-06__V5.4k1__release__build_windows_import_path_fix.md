# 2026-01-06 — V5.4k1 — Release: fix build_windows.py import path (ModuleNotFoundError: app_ui)

Model: **gpt-5.2 (Codex extension)** — reasoning effort **low**  
Justification: single-file bugfix to make the packaging script runnable; minimal risk.

---

## Goal

Fix local + CI release build script failure:

Running:

- `python tools/release/build_windows.py --out dist/PhysicsLab`

currently fails with:

- `ModuleNotFoundError: No module named 'app_ui'`

Make `build_windows.py` robust by ensuring the **repo root** is on `sys.path` before importing project modules.

---

## Touchlist

- `tools/release/build_windows.py`
- `docs/codex_prompts/INDEX.md` (append entry for V5.4k1)

---

## Forbidden list

- No refactors.
- No changes to pillars checks/tests unless necessary.
- No new dependencies.

---

## Implementation details

At the top of `tools/release/build_windows.py`, before any `import app_ui...` statements, add a safe repo-root path insertion:

- Determine repo root as `Path(__file__).resolve().parents[2]` (tools/release/* -> tools -> repo root)
- Insert it at the front of `sys.path` if not already present.

Example pattern:

```python
from pathlib import Path
import sys

REPO_ROOT = Path(__file__).resolve().parents[2]
repo_root_str = str(REPO_ROOT)
if repo_root_str not in sys.path:
    sys.path.insert(0, repo_root_str)
```

Keep it minimal and readable.

---

## Self-verification (agent must run)

1) `python -m pytest -q tests/pillars`
2) `python tools/release/build_windows.py --out dist/PhysicsLab`

Expected:
- no `ModuleNotFoundError`
- script proceeds into PyInstaller steps (it may still fail later if PyInstaller not installed, but the import must be fixed)

---

## Manual verification (user)

- Run: `python tools/release/build_windows.py --out dist/PhysicsLab`
- Confirm it no longer errors at `import app_ui...`

---

## Completion note

In your completion summary, include:
- confirmation the import error is fixed
- exact command(s) run and observed output line showing it progressed past imports

