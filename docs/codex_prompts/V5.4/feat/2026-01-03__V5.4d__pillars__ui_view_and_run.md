# GPT-5.2 Codex — Medium (reasoning)
Justification: This is multi-file UI + background-task wiring (System Health screen + a small runner) but not a deep architecture refactor. Medium is enough; bump to High only if you hit tricky Qt/threading issues.

## Goal
Add a first-class **Pillars** experience inside the app so users can **view the latest pillars report** and (optionally) **run the pillars harness from the UI** to regenerate it. This should live under **Diagnostics / System Health** (not DevTools), and remain compatible with the existing CLI harness output in `data/roaming/pillars_reports/*.json`.

## Touchlist
- `app_ui/screens/system_health.py` (or wherever System Health segments/tabs live)
- `diagnostics/` (only if needed for a clean data-provider / model)
- `tools/pillars_harness.py` (CLI already exists; only adjust if needed for UI invocation)
- `tools/pillars_report.py` (schema / parsing helpers; add a `load_latest_report()` helper if missing)
- `docs/codex_prompts/INDEX.md` (append one entry for this prompt after completion)

## Forbidden list
- Do NOT add a new “DevTools” module or hard-depend pillars on CodeSee.
- Do NOT require `pytest` or any dev-only tooling to run pillars from the UI.
- Do NOT change the pillars report format in a breaking way (existing fields must remain readable).
- Do NOT introduce new cross-layer imports that violate repo boundaries (keep UI↔tools interactions narrow).

## Implementation requirements

### A) System Health: add a Pillars view
Add a new segment/tab/section in System Health labeled **Pillars**.

The Pillars view should show:
- Header: “Pillars Status”
- “Last updated” timestamp (from report, or file mtime fallback)
- A summary line: `PASS: X  FAIL: Y  SKIP: Z` (or whatever statuses exist)
- A scrollable table/list with columns:
  - Pillar ID (or short name)
  - Title
  - Status (PASS/FAIL/SKIP)
  - Reason (short; truncate with tooltip for long text)

Also include:
- Button: **Open report folder** (opens the folder containing latest report)
- Button: **Copy report path** (puts latest report path on clipboard)
- If no report exists, show an empty-state with a button to run.

### B) Run pillars harness from UI (safe, optional)
Add a **Run pillars checks** button that:
- Runs the existing harness using the current interpreter (`sys.executable`) as a subprocess:
  - `python tools/pillars_harness.py --out data/roaming/pillars_reports`
- Runs it in a background worker so the UI stays responsive.
- Captures stdout/stderr to a small log area (or collapsible details panel).
- On completion:
  - Refreshes the Pillars view (reload latest report)
  - Shows a toast / status label (“Pillars run completed: PASS/FAIL/SKIP summary”)

Failure handling:
- If subprocess fails, show a readable error and keep the last report visible.
- If paths are missing, create them (same as CLI behavior).

Profile gating:
- Viewing is allowed for all profiles.
- Running is allowed for **Explorer + Educator** (Learner can view only).
  - If you can’t easily gate, allow all profiles but keep it safe and lightweight.

### C) Keep boundaries clean
Prefer a tiny helper layer:
- `tools/pillars_report.py` exposes something like:
  - `find_latest_report(report_dir: Path) -> Path | None`
  - `load_report(path: Path) -> PillarsReport`
- UI calls these helpers; avoid UI importing deep tool internals beyond this.

### D) Ensure existing Overview card remains correct
If System Health Overview already shows a “Pillars Status” card, keep it. If not, add a small card that:
- Shows PASS/FAIL/SKIP counts from the latest report
- Opens the new Pillars segment when clicked

### E) Fix CI compile guard robustness (if needed)
If CI compile step can ever silently pass without compiling, ensure it fails when roots are empty (already intended). Do not overcomplicate.

## Self-verify (required)
Run these commands locally (Windows PowerShell ok):

1) Compile:
- `python -m compileall app_ui diagnostics tools`

2) Run pillars harness:
- `python tools/pillars_harness.py --out data/roaming/pillars_reports_ui`

3) Run tests:
- `python -m pytest -q tests/pillars`

4) Manual UI:
- `python -m app_ui.main`
- Go to **System Health** → **Pillars**
- Confirm latest report loads and counts match
- Click **Run pillars checks** (if enabled) and confirm it refreshes
- Test **Open report folder** and **Copy report path**

## Git checkpoint (after successful verification)
git add -A
git commit -m "feat(V5.4d) pillars UI: view latest report + run harness"
git push
