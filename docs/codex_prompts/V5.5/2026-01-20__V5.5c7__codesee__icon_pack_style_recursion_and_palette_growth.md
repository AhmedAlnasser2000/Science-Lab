MODEL: gpt-5.2-codex — reasoning_effort=high
Justification: Current Lens Palette is visually blank even when Lens dropdown contains items. Multiple incremental fixes didn’t converge; rebuild cleanly for correctness.

Goal
- Rebuild Code See “Lens Palette” so it is NEVER blank.
- Tiles MUST reflect the exact lenses shown in the “Lens:” dropdown (Atlas, Platform, Content, Bus, Extensibility/Dependencies).
- Search MUST filter those lens tiles (case-insensitive substring).
- Palette MUST ALWAYS show a visible status/empty message (even if the grid area is empty/clipped).

Design reference (visual only; correctness first)
- /mnt/data/2026-01-19__V5.5c__lens_palette_box_design_reference.md
  - Use the same box palette style (header + close/pin, search row, 3-col tile grid, footer actions).

Observed failure (why rebuild)
- Palette grid area stays blank:
  - No tiles render even though dropdown has lenses.
  - Typing “pla” shows nothing.
  - No empty/no-results message appears either.
=> Either palette is wired to wrong data source, or tiles are not actually attached/visible in the on-screen layout.

Constraints
- Do NOT ask user for snippets; find and inspect code yourself.
- No new dependencies.
- Must work in BOTH Code See embedded view and Code See (Window) variant.
- Keep existing behavior: selecting a lens applies it; pin/unpin continues to exist.

Approach (must follow)
1) Recon: Find where the Lens dropdown is populated and where the palette is opened.
   - Confirm if embedded and window variants use different palette code paths.
   - They MUST both use the same palette widget class after this change.

2) Delete/Remove the current lens palette tile/search/empty-state implementation.
   - Stop trying to patch it; replace with a single isolated widget.

3) Implement a dedicated widget class: LensPaletteWidget
   - Owns UI: header, search row, ALWAYS-visible status line, scroll area + grid container, footer row.
   - Exposes:
     - set_lens_combo(QComboBox)  # source-of-truth for lens inventory
     - set_on_select(callback(label))  # called when tile clicked
     - refresh()  # rebuild from combo + filter
     - set_pinned(bool) / is_pinned()

4) Source-of-truth inventory = Lens dropdown combo model
   - labels = [combo.itemText(i) for i in range(combo.count())]
   - Treat label as id for now.
   - If count==0: status shows “No lenses available (try Refresh)” and no tiles.

5) “Never blank” UI rule
   - Status QLabel must be OUTSIDE the scroll area, directly under the search bar.
   - It must always be visible and have a minimum height.
   - Status text rules:
     - query empty: “Lenses: N | Matches: N”
     - query non-empty & matches M: “Lenses: N | Matches: M”
     - query non-empty & M==0: “No results for ‘<q>’ (Lenses: N)”

6) Grid correctness (Qt ownership + visibility)
   - scrollArea.setWidget(container) and setWidgetResizable(True).
   - container has a QGridLayout (3 columns).
   - Each tile widget MUST be parented to container.
   - Keep strong references: self._tile_widgets = [] (append every tile).
   - After rebuild: verify grid_layout.count() == number of tiles you think you added.

7) Rebuild timing (avoid “built too early”)
   - refresh() is called:
     - when palette shows (showEvent)
     - after set_lens_combo
     - when combo model changes: modelReset / rowsInserted / dataChanged
       - connect those and schedule QTimer.singleShot(0, refresh)
   - Also ensure Code See “Refresh” or Source changes that repopulate the lens combo trigger palette.refresh().

8) Search behavior clarification (important)
   - Search filters the actual lenses (Atlas/Platform/Content/Bus/Extensibility/Dependencies).
   - The icon tiles in the reference mock are just styling — not the items being searched today.
   - “pla” MUST match “Platform”.

9) Debug-gated logs (must add)
   - Under PHYSICSLAB_CODESEE_DEBUG=1 log each refresh:
     - available_lenses_total=<N> query='<q>' filtered=<M>
     - tiles_created=<K> grid_count=<G>
     - sample_labels=[... up to 5]
   - No logs when debug not enabled.

Tests (required)
- Add a small unit test for the filter helper (no full GUI):
  - labels = [Atlas, Platform, Content, Bus, Extensibility/Dependencies]
  - q='pla' -> [Platform]
  - q='' -> all
  - q='zzz' -> []

Auto-verify
- python -m compileall -q app_ui
- pytest -q

Manual verify checklist
1) Open Code See (embedded) -> open palette:
   - empty query shows 5 tiles
   - status shows “Lenses: 5 | Matches: 5”
2) Type “pla”:
   - only Platform tile visible
   - status: “Lenses: 5 | Matches: 1”
3) Type “zzz”:
   - no tiles visible
   - status: “No results for ‘zzz’ (Lenses: 5)”
4) Pin/unpin keeps correct layout and status remains visible.
5) Repeat in “Open in Window” variant.

Commit
- fix(V5.5c6) CodeSee lens palette rebuild; tiles from lens combo; status line; search works

Git checkpoint
git add -A
git commit -m "fix(V5.5c6) CodeSee lens palette rebuild; tiles from lens combo; status line; search works"
git push
