# Codex Prompt - V5.5c12 docs + milestones organization pass (docs taxonomy + codex_prompts slice/type folders)

## Goal
Reorganize repo documentation so it's easy to navigate and hard to regress:
1) Make `docs/` internally consistent (handbook vs plans vs release vs checkpoints vs codesee, etc.).
2) Reorganize `docs/codex_prompts/` by **version slice** (e.g., V5.5c) and **type** (`feat/ fix/ patch/ chore/ docs/`).
3) Triage docs outside `docs/` (notably top-level `Milestones/`) and either (a) keep it but index it cleanly, or (b) migrate into `docs/milestones/` with a compatibility note-based on what you find in that folder.

**Critical constraint:** you may rename files/folders if needed, but **must read each prompt/document first** (at minimum the top section) before deciding where it goes and how it should be named.

## Touchlist
### A) Inventory (do not move anything yet)
1) Enumerate documentation candidates:
   - `docs/**`
   - top-level `Milestones/**` (exists outside `docs/`)
   - repo-root docs: `README*`, `CHANGELOG*` (reference-only; don't move unless required)
2) For each candidate file, open and read enough to classify:
   - For `.md/.txt`: read at least the first ~60 lines (more if ambiguous).
   - For `.docx`: do not attempt content-driven renames unless you can reliably inspect it; treat as an attachment and classify by its filename/context.

### B) Define/confirm the docs taxonomy (minimal but consistent)
Use (or lightly refine) this intended structure:

- `docs/README.md` - canonical docs index (keep)
- `docs/app_summary_latest.md` - canonical code-verified checkpoint (keep)
- `docs/checkpoints/**` - checkpoint history/inputs conventions (keep)
- `docs/handbook/**` - contributor handbook + workflow + safety rules + glossary
- `docs/plans/**` - design plans / proposals (keep)
- `docs/overviews/**` - version overviews (keep)
- `docs/release/**` - packaging/release pipeline docs (keep)
- `docs/migrations/**` - migration notes/artifacts (keep)
- `docs/codesee/**` - CodeSee design + harness notes (keep)
- `docs/prompts/**` - non-Codex prompts (e.g., diagram tooling prompt) (keep)
- `docs/snapshots/**` - repo tree snapshots, captured states (keep)
- `docs/codex_prompts/**` - Codex prompt documents (reorganize; see section C)

Also decide how to handle `Milestones/` (outside docs):
- If `Milestones/` contains time-based changelogs / progress logs that people already reference, keep the folder at repo-root but:
  - ensure it has `Milestones/README.md` or `Milestones/INDEX.md`
  - add a link from `docs/README.md` to that index
- If it's redundant with `docs/overviews` or you find it's better inside docs, migrate to `docs/milestones/` **and** leave a compatibility note (e.g., keep a small `Milestones/README.md` pointing to `docs/milestones/`).

### C) Reorganize `docs/codex_prompts/` by slice and type
Current state (verified from a docs archive):
- `docs/codex_prompts/V5.4/*.md`
- `docs/codex_prompts/V5.5/*.md`
- `docs/codex_prompts/V5.5/docs/*` (includes at least one `.docx` attachment)

Target state:
```
docs/codex_prompts/
  INDEX.md
  README.md (optional: brief conventions)
  V5.4/   (leave as-is, or optionally also slice/type later-NOT required in this pass)
  V5.5/
    V5.5a/{feat,fix,patch,chore,docs}/
    V5.5b/{feat,fix,patch,chore,docs}/
    V5.5c/{feat,fix,patch,chore,docs}/
    _attachments/   (optional: for docx/png/etc that don't fit cleanly)
```

Classification rules (apply deterministically; no guessing):
- Determine slice from the filename `__V5.5a...`, `__V5.5b...`, `__V5.5c...`
- Determine type by reading the prompt's intent:
  - `feat/` new functionality / new UI / new capability
  - `fix/` bug fix with limited scope
  - `patch/` stability hardening / guardrails / recursion/WmDestroy fixes / “safety-mode” type changes
  - `chore/` organization, tooling hygiene, index maintenance, versioning plumbing
  - `docs/` pure documentation/design references
- If a filename already contains a strong hint (e.g., `__patch`), still **confirm by reading** (don't blindly trust the name).

Renaming policy:
- Prefer `git mv` without renaming filenames unless necessary.
- You MAY rename to add a missing type token (e.g., `__feat__`) only after reading and only if it materially improves future automation.
- If you rename, update `docs/codex_prompts/INDEX.md` links accordingly.

Duplicate cleanup:
- Detect duplicates by content hash before deleting (e.g., a “copy” file). Only delete if byte-identical or clearly redundant after reading.

### D) Move/rename other docs into the right folders (handbook/plans/etc.)
Scan `docs/` root for “floating” docs that belong in handbook. For example (expectation; verify by reading):
- workflow rules and safety rules → `docs/handbook/`
- glossary/terms → `docs/handbook/` (or `docs/handbook/glossary.md`)
- dev setup → `docs/handbook/`

If you move files, update links from:
- `docs/README.md`
- any other docs that reference them (use ripgrep to find references)

### E) Update indexes and keep navigation stable
1) Fix `docs/codex_prompts/INDEX.md` so every entry uses a correct relative path from `docs/codex_prompts/`.
2) Ensure `docs/README.md`:
   - still points to `docs/app_summary_latest.md`
   - still points to the main subfolders
   - includes a stable link to the milestone index (either `Milestones/INDEX.md` or `docs/milestones/INDEX.md`)

### F) Self-verification (must do)
Automated checks:
1) Verify there are no broken local links in docs/codex_prompts index:
   - Write/run a tiny Python script (in `tools/` or a one-off) that:
     - parses `docs/codex_prompts/INDEX.md`
     - extracts relative `(... .md)` links
     - asserts each target exists on disk
2) Run quick repo sanity (docs-only change, keep it light):
   - `python -m compileall app_ui core_center runtime_bus content_system ui_system component_runtime component_repo tools -q` (or equivalent compileall roots used by your CI)

Manual checks:
- Open `docs/README.md` and click around: handbook, plans, release, codesee, codex_prompts, checkpoints.
- Open `docs/codex_prompts/INDEX.md` and click 5–10 representative entries across V5.5a/b/c.
- Confirm `Milestones/` is discoverable from docs (either via link or migrated location).

## Forbidden list
- Do NOT modify runtime code (Python/Rust/Qt) beyond what is necessary for docs link maintenance (ideally zero).
- Do NOT “guess” prompt classification without reading the prompt.
- Do NOT delete or rename anything in `Milestones/` unless you first inventory it and confirm it's safe (links/indexes updated).
- Do NOT reorganize beyond docs/milestones/codex_prompts scope in this pass (avoid scope creep).

## Model / settings suggestion
Use **gpt-5.2 (Codex)** with **reasoning effort = medium**.
Rationale: multi-file moves + content-based classification needs careful reading, but it's not deep algorithmic work.

## Suggested commit checkpoints (within the V5.5c slice PR)
Checkpoint 1 - docs taxonomy moves (handbook cleanup, docs README updates)
```bash
git add -A
git commit -m "chore(V5.5c12) docs taxonomy cleanup and indexes"
git push
```

Checkpoint 2 - codex_prompts slice/type restructure + duplicate cleanup
```bash
git add -A
git commit -m "chore(V5.5c12) reorganize codex prompts by slice and type"
git push
```

Checkpoint 3 - link verifier + final index polish
```bash
git add -A
git commit -m "chore(V5.5c12) add docs index link verification"
git push
```

