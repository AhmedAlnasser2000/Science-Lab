# Codex Prompt - V5.5c13.2 app_ui: agent dictionary and NAV v1

# Goal
Create an **Agent Dictionary** for `app_ui/` (speed-map for agents) and add **NAV anchors** to a small set of the highest-traffic `app_ui` files so agents can jump around quickly, without changing behavior.

- This is for agents (Codex/Gemini/etc.), not meant to replace existing docs.
- Scope is **app_ui only**. Avoid repo-wide NAV.
- Model default for this slice: **GPT‑5.3‑Codex (Medium)**.

# Touchlist
## 0) Baseline (no edits yet)
Run:
- `pytest -q tests/test_codesee_*`
- `python -m compileall app_ui -q`

## 1) Create Agent Dictionary docs
Create folder:
- `docs/agent_dictionary/`

Create these files:

### A) `docs/agent_dictionary/INDEX.md`
Purpose: a tiny hub page that links to per-area maps.
Include:
- `app_ui.md`
- `app_ui_screens.md`
- `app_ui_widgets.md`
- `app_ui_labs.md`
- `app_ui_codesee.md` (if it already exists from earlier work, link it; otherwise create a minimal one-page summary that points into `app_ui/codesee/`)

### B) `docs/agent_dictionary/app_ui.md`
One-page “entry map” for agents:
- Entry points:
  - `app_ui/main.py` (MainWindow + navigation router)
  - `app_ui/config.py`, `app_ui/versioning.py`
- Where major features live:
  - `app_ui/screens/` (screen modules)
  - `app_ui/labs/` (lab host + plugins)
  - `app_ui/codesee/` (CodeSee)
  - `app_ui/widgets/` (reusable widgets)
  - `app_ui/ui_helpers/` (Qt helper utilities)
- “Edit-when” bullets (where to change navigation, where to change a screen, etc.)
- Add a small “NAV quick jumps” section listing key NAV tags (see step 2).

### C) `docs/agent_dictionary/app_ui_screens.md`
List each screen module and what it does, formatted for agents:

For each:
- **Path**
- **Role** (1 line)
- **Key symbols** (classes/functions)
- **Edit-when**
- **NAV anchors** (if added in step 2)
- **Risks/Notes** (e.g., uses bus endpoints, long file, avoid behavior changes)

Include at least:
- `app_ui/screens/system_health.py`
- `app_ui/screens/workspace_management.py`
- `app_ui/screens/content_browser.py`
- `app_ui/screens/component_management.py`
- `app_ui/screens/block_catalog.py`
- `app_ui/screens/block_host.py`

### D) `docs/agent_dictionary/app_ui_widgets.md`
Map the most-used widgets (keep short):
- `app_ui/widgets/app_header.py`
- `app_ui/widgets/workspace_selector.py`
- any other central widgets referenced by multiple screens.

### E) `docs/agent_dictionary/app_ui_labs.md`
Map:
- `app_ui/labs/host.py` (LabHost + guide panel + policy)
- lab plugins (`gravity_lab.py`, `projectile_lab.py`, `electric_field_lab.py`, `lens_ray_lab.py`, `vector_add_lab.py`)
- shared lab primitives/rendering helpers if present.

## 2) Add NAV anchors to a small, high-value subset of `app_ui`
Important: **comments-only** in this step; no logic changes; keep diffs tight.

Add NAV headers + section markers (match style in `app_ui/main.py`):
- Top-of-file NAV INDEX block
- Section headers: `# === [NAV-XX] ...`
- Optional editor folding: `# region ...` / `# endregion ...`

### Target files for NAV in this slice
Only annotate these (avoid scope creep):
1) `app_ui/screens/system_health.py` (big, high churn)
2) `app_ui/screens/workspace_management.py` (big)
3) `app_ui/kernel_bridge.py` (integration surface)
4) `app_ui/safe_viewer.py` (safety surface)

If any of these already contain NAV, do not duplicate—extend minimally.

### Suggested NAV map (use if it matches; adjust titles to reality)
#### `system_health.py`
- `[NAV-00] Imports / constants`
- `[NAV-10] Bus helpers / request-reply wrappers`
- `[NAV-20] SystemHealthScreen: ctor + wiring`
- `[NAV-30] Segments/panels: Overview`
- `[NAV-31] Segments/panels: Runs`
- `[NAV-32] Segments/panels: Maintenance`
- `[NAV-33] Segments/panels: Modules`
- `[NAV-34] Segments/panels: Jobs`
- `[NAV-35] Segments/panels: Pillars`
- `[NAV-36] Segments/panels: Crashes`
- `[NAV-90] Small UI helpers / formatters`
- `[NAV-99] End`

#### `workspace_management.py`
- `[NAV-00] Imports / constants`
- `[NAV-10] Workspace model / IO helpers`
- `[NAV-20] WorkspaceManagementScreen: ctor + UI`
- `[NAV-30] Create/switch flows`
- `[NAV-40] Templates (seed/copy)`
- `[NAV-90] Helpers`
- `[NAV-99] End`

#### `kernel_bridge.py`
- `[NAV-00] Imports / constants`
- `[NAV-10] DLL candidates + load strategy`
- `[NAV-20] ABI symbol binding`
- `[NAV-30] Public bridge API`
- `[NAV-99] End`

#### `safe_viewer.py`
- `[NAV-00] Imports / constants`
- `[NAV-10] Safe-mode gates / env flags`
- `[NAV-20] SafeViewer entrypoints`
- `[NAV-30] Error handling / diagnostics`
- `[NAV-99] End`

## 3) Update Agent Dictionary with NAV quick-jumps
After NAV annotations land, update:
- `docs/agent_dictionary/app_ui.md`
- `docs/agent_dictionary/app_ui_screens.md`
to include the key anchors (e.g., “system_health.py [NAV-35] Pillars”).

## 4) Prompt-index hygiene
Store this prompt doc in:
- `docs/codex_prompts/V5.5/V5.5c/chore/`

Append an entry to `docs/codex_prompts/INDEX.md` under `V5.5c → chore/`.

## 5) Self-verify
Automated:
- `pytest -q tests/test_codesee_*`
- `python -m compileall app_ui -q`

Manual (quick):
- Launch app, open System Health and click through segments.
- Open Workspace Management and create/switch flow (no-op if you don’t want to create; at least open UI).
- Open a lab (Quick Start) to ensure kernel bridge import path still works.

# Forbidden list
- Do NOT reorganize folders (no moving files) in this slice. NAV + dictionary only.
- Do NOT change behavior. For NAV: comments only.
- Do NOT annotate the entire repo. Only the 4 files listed above.
- Do NOT break import paths relied on by tests or main window.

# Git checkpoints
Prefer two commits:

A) docs only:
```bash
git add -A
git commit -m "docs(V5.5c13) add agent dictionary for app_ui"
git push
```

B) NAV annotations:
```bash
git add -A
git commit -m "chore(V5.5c13) add NAV anchors to key app_ui files"
git push
```

